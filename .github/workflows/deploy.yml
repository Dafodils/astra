name: Publish package to the Maven Central Repository
on: 
  release:
    types: [created]
jobs:
  release:
    name: "Deploy"
    runs-on: ubuntu-latest
    
    steps:
      - uses: actions/checkout@v2

      - name: Set up JDK 11
        uses: actions/setup-java@v1
        with:
          java-version: 11

      - name: "Maven Deploy"
        run: mvn clean deploy --settings .maven-settings.xml -B -U -Prelease
        env:
          GPG_OWNERTRUST: echo $GPG_OWNERTRUST | base64 --decode | $GPG_EXECUTABLE --import-ownertrust
          GPG_SECRET_KEYS: echo $GPG_SECRET_KEYS | base64 --decode | $GPG_EXECUTABLE --import
